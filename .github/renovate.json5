{
  $schema: "https://docs.renovatebot.com/renovate-schema.json",
  extends: [
    "config:recommended",
    ":dependencyDashboard",
    ":semanticCommits",
    ":automergeDigest",
    ":automergeBranch"
  ],
  timezone: "UTC",
  schedule: ["before 8am"],
  labels: ["dependencies"],
  assigneesFromCodeOwners: true,
  reviewersFromCodeOwners: true,
  platformAutomerge: true,
  packageRules: [
    {
      description: "Group .NET SDK updates",
      matchManagers: ["github-actions"],
      matchPackageNames: ["actions/setup-dotnet"],
      groupName: "dotnet-sdk"
    },
    {
      description: "Group GitHub Actions updates", 
      matchManagers: ["github-actions"],
      excludePackageNames: ["actions/setup-dotnet"],
      groupName: "github-actions",
      automerge: true
    },
    {
      description: "Group Microsoft packages",
      matchPackagePatterns: ["^Microsoft\\."],
      groupName: "microsoft-packages",
      schedule: ["before 8am on monday"]
    },
    {
      description: "Group test packages",
      matchPackagePatterns: [
        "^xunit",
        "^coverlet", 
        "^Microsoft\\.NET\\.Test\\.Sdk",
        "^Shouldly"
      ],
      groupName: "test-packages",
      automerge: true
    },
    {
      description: "Auto-merge patch updates for stable packages",
      matchUpdateTypes: ["patch"],
      matchPackagePatterns: [
        "^StackExchange\\.Redis",
        "^Npgsql",
        "^Consul",
        "^ZooKeeperNetEx"
      ],
      automerge: true
    },
    {
      description: "Require approval for major updates",
      matchUpdateTypes: ["major"],
      automerge: false,
      labels: ["major-update", "needs-review"]
    }
  ],
  vulnerabilityAlerts: {
    labels: ["security"],
    assigneesFromCodeOwners: true,
    reviewersFromCodeOwners: true
  },
  lockFileMaintenance: {
    enabled: false
  }
}